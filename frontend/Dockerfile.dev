FROM node:22-alpine

WORKDIR /app

# 1. Copy package files first for better caching
COPY package.json package-lock.json /app/

# 2. Install dependencies (including vite)
# This installs all local node_modules into the image layer
RUN npm install

# 3. Copy the entrypoint script
COPY entrypoint.sh .

# 4. Set the entrypoint to explicitly call the script using the /bin/sh interpreter
ENTRYPOINT ["/bin/sh", "/app/entrypoint.sh"]

EXPOSE 5173
